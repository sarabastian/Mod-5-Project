{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sarabastian/Flatiron/code/final-project/frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Login from './components/login';\nimport Header from './Header';\n\nfunction App() {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [form, setForm] = useState(\"\");\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      fetch('http://localhost:3001/api/v1/auto_login', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(resp => resp.json()).then(data => {\n        setUser(data); // console.log(data)\n      });\n    }\n  }, []);\n\n  const handleLogin = user => {\n    setUser(user);\n  };\n\n  const handleFormSwitch = input => {\n    setForm(input);\n  };\n\n  const handleAuthClick = () => {\n    const token = localStorage.getItem(\"token\");\n    fetch(`http://localhost:3001/api/v1/user_is_authed`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(resp => resp.json()).then(data => console.log(data));\n  };\n\n  console.log(user);\n\n  const renderForm = () => {\n    switch (form) {\n      case \"login\":\n        return /*#__PURE__*/_jsxDEV(Login, {\n          handleLogin: handleLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 16\n        }, this);\n        break;\n\n      default: // return <SignInForm handleLogin={handleLogin}/>\n\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      handleFormSwitch: handleFormSwitch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), renderForm(), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAuthClick,\n      className: \"ui button\",\n      children: \"Access Authorized Route\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n} // class App extends React.Component {\n//   state = {\n//     isLoggedIn: false\n//   }\n//   componentDidMount(){\n//     this.handleLogin();\n//   }\n//   handleLogin = () => {\n//     if(localStorage.getItem('token')) {\n//       this.setState({ isLoggedIn: true})\n//     }\n//   }\n//   render() {\n//     return (\n//       <div className=\"App\">\n//         <Router>\n//           <Switch>\n//             <Route path=\"/login\" component={() => <Login login={this.state.isLoggedIn} handleLogin={this.handleLogin}/>} />\n//           </Switch>\n//        </Router>\n//           </div>\n//     )\n//   }\n// }\n\n\n_s(App, \"fKViy9bLEK2FYaAkbjXtsjAcNQ8=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/sarabastian/Flatiron/code/final-project/frontend/src/App.js"],"names":["React","useState","useEffect","BrowserRouter","Router","Route","Switch","Login","Header","App","user","setUser","form","setForm","token","localStorage","getItem","fetch","headers","Authorization","then","resp","json","data","handleLogin","handleFormSwitch","input","handleAuthClick","console","log","renderForm"],"mappings":";;;;;AACA,OAAO,WAAP;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,aAAa,IAAIC,MAA1B,EAAkCC,KAAlC,EAAyCC,MAAzC,QAAuD,kBAAvD;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACW,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,EAAD,CAAhC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMY,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,QAAIF,KAAJ,EAAW;AACTG,MAAAA,KAAK,CAAC,yCAAD,EAA4C;AAC/CC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASL,KAAM;AADxB;AADsC,OAA5C,CAAL,CAKGM,IALH,CAKQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EALhB,EAMGF,IANH,CAMQG,IAAI,IAAI;AACZZ,QAAAA,OAAO,CAACY,IAAD,CAAP,CADY,CAEZ;AACD,OATH;AAUD;AACF,GAdQ,EAcN,EAdM,CAAT;;AAeA,QAAMC,WAAW,GAAId,IAAD,IAAU;AAC5BC,IAAAA,OAAO,CAACD,IAAD,CAAP;AACD,GAFD;;AAIA,QAAMe,gBAAgB,GAAIC,KAAD,IAAW;AAClCb,IAAAA,OAAO,CAACa,KAAD,CAAP;AACD,GAFD;;AAGA,QAAMC,eAAe,GAAG,MAAM;AAC5B,UAAMb,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAC,IAAAA,KAAK,CAAE,6CAAF,EAAgD;AACnDC,MAAAA,OAAO,EAAE;AACP,yBAAkB,UAASJ,KAAM;AAD1B;AAD0C,KAAhD,CAAL,CAKCM,IALD,CAKMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EALd,EAMCF,IAND,CAMMG,IAAI,IAAIK,OAAO,CAACC,GAAR,CAAYN,IAAZ,CANd;AAOD,GATD;;AAWAK,EAAAA,OAAO,CAACC,GAAR,CAAYnB,IAAZ;;AAEA,QAAMoB,UAAU,GAAG,MAAM;AACvB,YAAOlB,IAAP;AACE,WAAK,OAAL;AACE,4BAAO,QAAC,KAAD;AAAO,UAAA,WAAW,EAAEY;AAApB;AAAA;AAAA;AAAA;AAAA,gBAAP;AACA;;AACF,cAJF,CAKI;;AALJ;AAOD,GARD;;AASA,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,4BAEI,QAAC,MAAD;AAAQ,MAAA,gBAAgB,EAAEC;AAA1B;AAAA;AAAA;AAAA;AAAA,YAFJ,EAIMK,UAAU,EAJhB,eAMI;AAAQ,MAAA,OAAO,EAAEH,eAAjB;AAAkC,MAAA,SAAS,EAAC,WAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YANJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAWD,C,CAID;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAKA;AACA;AAGA;AACA;AACA;AAGA;;;GAlGSlB,G;;KAAAA,G;AAoGT,eAAeA,GAAf","sourcesContent":["\nimport './App.css';\nimport React, { useState, useEffect } from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Login from './components/login';\nimport Header from './Header'\n\nfunction App() {\n  const [user, setUser] = useState({})\n  const [form, setForm] = useState(\"\")\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\")\n    if (token) {\n      fetch('http://localhost:3001/api/v1/auto_login', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(resp => resp.json())\n        .then(data => {\n          setUser(data)\n          // console.log(data)\n        })\n    }\n  }, [])\n  const handleLogin = (user) => {\n    setUser(user)\n  }\n\n  const handleFormSwitch = (input) => {\n    setForm(input)\n  }\n  const handleAuthClick = () => {\n    const token = localStorage.getItem(\"token\")\n    fetch(`http://localhost:3001/api/v1/user_is_authed`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    })\n    .then(resp => resp.json())\n    .then(data => console.log(data))\n  }\n\n  console.log(user)\n\n  const renderForm = () => {\n    switch(form){\n      case \"login\":\n        return <Login handleLogin={handleLogin}/>\n        break;\n      default:\n        // return <SignInForm handleLogin={handleLogin}/>\n    }\n  }\n  return (\n    <div className=\"App\">\n    \n        <Header handleFormSwitch={handleFormSwitch}/>\n        {\n          renderForm()\n        }\n        <button onClick={handleAuthClick} className=\"ui button\">Access Authorized Route</button>\n    </div>\n  );\n\n}\n\n\n\n// class App extends React.Component {\n//   state = {\n//     isLoggedIn: false\n//   }\n\n//   componentDidMount(){\n//     this.handleLogin();\n//   }\n\n//   handleLogin = () => {\n//     if(localStorage.getItem('token')) {\n//       this.setState({ isLoggedIn: true})\n//     }\n//   }\n\n//   render() {\n//     return (\n//       <div className=\"App\">\n//         <Router>\n//           <Switch>\n\n//             <Route path=\"/login\" component={() => <Login login={this.state.isLoggedIn} handleLogin={this.handleLogin}/>} />\n\n\n\n\n//           </Switch>\n//        </Router>\n\n\n//           </div>\n//     )\n//   }\n\n\n// }\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}